{"version":3,"sources":["webpack:///js/login.js","webpack:///./src/login.js","webpack:///./src/js/cookieUtil.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_promise","_promise2","_vue","_vue2","_vueResource","_vueResource2","_cookieUtil","use","data","name","info","pwd","pwdRepeat","methods","login","payload","_this","this","http","post","then","response","state","reject","msg","date","Date","now","set","window","location","hostname","href","doLogin","_this2","length","catch","clearInfo","watch","$mount","24","41","157","get","cookieName","encodeURIComponent","cookieStart","document","cookie","indexOf","cookieValue","cookieEnd","decodeURIComponent","substr","value","expires","path","domain","secure","cookieText","toGMTString","unset","Object","defineProperty"],"mappings":"AAAAA,cAAc,EAAE,IAEVC,EACA,SAAUC,EAAQC,EAASC,GAEhC,YAkBA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAhBvF,GAAIG,GAAWL,EAAoB,KAE/BM,EAAYL,EAAuBI,GCTxCE,EAAAP,EAAA,IDaKQ,EAAQP,EAAuBM,GCZpCE,EAAAT,EAAA,IDgBKU,EAAgBT,EAAuBQ,ECf5CT,GAAA,GACA,IAAAW,GAAAX,EAAA,IAEAQ,GAAAJ,QAAIQ,IAAJF,EAAAN,SAEA,GAAAI,GAAAJ,SACES,MACEC,KAAM,GACNC,KAAM,GACNC,IAAK,GACLC,UAAW,IAEbC,SACEC,MADO,SACDC,GAAS,GAAAC,GAAAC,IACb,OAAOd,GAAAJ,QAAImB,KAAKC,KAAK,aAAcJ,GAChCK,KAAK,SAAAC,GACJ,GAA4B,IAAxBA,EAASb,KAAKc,MAKhB,MAAOrB,GAAAF,QAAQwB,OAAOF,EAASb,KAAKgB,IAJpC,IAAMC,GAAO,GAAIC,MAAKA,KAAKC,MAAQ,OACnC,EAAArB,EAAAsB,KAAI,OAAQZ,EAAKP,KAAMgB,EAAM,IAAKI,OAAOC,SAASC,UAClDF,OAAOC,SAASE,KAAO,kBAM/BC,QAbO,WAaG,GAAAC,GAAAjB,IACR,OAAKA,MAAKR,KAAK0B,OACXlB,KAAKN,IAAIwB,OAAS,EAAUlB,KAAKP,KAAO,aAC5CO,MAAKH,OAAQL,KAAMQ,KAAKR,KAAME,IAAKM,KAAKN,MACrCyB,MAAM,SAAAZ,GAAA,MAAOU,GAAKxB,KAAOc,IAHEP,KAAKP,KAAO,aAK5C2B,UAnBO,WAoBLpB,KAAKP,KAAO,KAGhB4B,OACE7B,KAAM,YACNE,IAAK,eAEN4B,OAAO,WD4BJC,GACA,SAAU/C,EAAQC,KAMlB+C,GACA,SAAUhD,EAAQC,KAMlBgD,IACA,SAAUjD,EAAQC,GAEvB,YErFD,SAASiD,GAAIlC,GACT,GAAImC,GAAaC,mBAAmBpC,GAAQ,IACxCqC,EAAcC,SAASC,OAAOC,QAAQL,GACtCM,EAAc,KACdC,EAAU,IAQd,OANIL,IAAc,IACdK,EAAYJ,SAASC,OAAOC,QAAQ,IAAKH,GACrCK,IAAa,IAAGA,EAAYJ,SAASC,OAAOb,SAEpDe,EAAcE,mBAAmBL,SAASC,OAAOK,OAAOP,EAClDF,EAAWT,OAAQgB,IAG7B,QAASvB,GAAInB,EAAM6C,EAAOC,EAASC,EAAMC,EAAQC,GAC7C,GAAIC,GAAad,mBAAmBpC,GAAQ,IAAMoC,mBAAmBS,EACjEC,aAAmB7B,QACnBiC,GAAc,aAAeJ,EAAQK,eACrCJ,IAAMG,GAAc,UAAYH,GAChCC,IAAQE,GAAc,YAAcF,GACpCC,IAAQC,GAAc,YAC1BZ,SAASC,OAASW,EAGtB,QAASE,GAAMpD,EAAM+C,EAAMC,EAAQC,GAC/B9B,EAAInB,EAAM,GAAI,GAAIiB,MAAK,GAAI8B,EAAMC,EAAQC,GF8D5CI,OAAOC,eAAerE,EAAS,cAC3B4D,OAAO,IA6BX5D,EExFGiD,MFyFHjD,EEzFOkC,MF0FPlC,EE1FWmE","file":"js/login.js","sourcesContent":["webpackJsonp([3,0],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _promise = __webpack_require__(129);\n\t\n\tvar _promise2 = _interopRequireDefault(_promise);\n\t\n\tvar _vue = __webpack_require__(13);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _vueResource = __webpack_require__(25);\n\t\n\tvar _vueResource2 = _interopRequireDefault(_vueResource);\n\t\n\t__webpack_require__(24);\n\t\n\tvar _cookieUtil = __webpack_require__(157);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.use(_vueResource2.default);\n\t\n\tnew _vue2.default({\n\t  data: {\n\t    name: '',\n\t    info: '',\n\t    pwd: '',\n\t    pwdRepeat: ''\n\t  },\n\t  methods: {\n\t    login: function login(payload) {\n\t      var _this = this;\n\t\n\t      return _vue2.default.http.post('/api/login', payload).then(function (response) {\n\t        if (response.data.state === 1) {\n\t          var date = new Date(Date.now() + 60000 * 30);\n\t          (0, _cookieUtil.set)('user', _this.name, date, '/', window.location.hostname);\n\t          window.location.href = \"./index.html\";\n\t        } else {\n\t          return _promise2.default.reject(response.data.msg);\n\t        }\n\t      });\n\t    },\n\t    doLogin: function doLogin() {\n\t      var _this2 = this;\n\t\n\t      if (!this.name.length) return this.info = '请输入合适的用户名';\n\t      if (this.pwd.length < 5) return this.info = '密码长度太短';\n\t      this.login({ name: this.name, pwd: this.pwd }).catch(function (msg) {\n\t        return _this2.info = msg;\n\t      });\n\t    },\n\t    clearInfo: function clearInfo() {\n\t      this.info = '';\n\t    }\n\t  },\n\t  watch: {\n\t    name: 'clearInfo',\n\t    pwd: 'clearInfo'\n\t  }\n\t}).$mount('#login');\n\n/***/ }),\n\n/***/ 24:\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 41:\n/***/ (function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ }),\n\n/***/ 157:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tfunction get(name) {\n\t    var cookieName = encodeURIComponent(name) + '=',\n\t        cookieStart = document.cookie.indexOf(cookieName),\n\t        cookieValue = null,\n\t        cookieEnd = null;\n\t\n\t    if (cookieStart > -1) {\n\t        cookieEnd = document.cookie.indexOf(';', cookieStart);\n\t        if (cookieEnd == -1) cookieEnd = document.cookie.length;\n\t    }\n\t    cookieValue = decodeURIComponent(document.cookie.substr(cookieStart + cookieName.length, cookieEnd));\n\t    return cookieValue;\n\t}\n\tfunction set(name, value, expires, path, domain, secure) {\n\t    var cookieText = encodeURIComponent(name) + \"=\" + encodeURIComponent(value);\n\t    if (expires instanceof Date) cookieText += \"; expires=\" + expires.toGMTString();\n\t    if (path) cookieText += \"; path=\" + path;\n\t    if (domain) cookieText += \"; domain=\" + domain;\n\t    if (secure) cookieText += \"; secure\";\n\t    document.cookie = cookieText;\n\t}\n\t\n\tfunction unset(name, path, domain, secure) {\n\t    set(name, '', new Date(0), path, domain, secure);\n\t}\n\t\n\texports.get = get;\n\texports.set = set;\n\texports.unset = unset;\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/login.js","import Vue from 'vue'\nimport VueResource from 'vue-resource'\nimport '../static/lib/font-awesome/css/font-awesome.css'\nimport {set}  from './js/cookieUtil'\n\nVue.use(VueResource)\n\nnew Vue({\n  data: {\n    name: '',\n    info: '',\n    pwd: '',\n    pwdRepeat: ''\n  },\n  methods: {\n    login(payload) {\n      return Vue.http.post('/api/login', payload)\n        .then(response => {\n          if (response.data.state === 1) {\n            const date = new Date(Date.now() + 60000 * 30)\n            set('user', this.name, date, '/', window.location.hostname)\n            window.location.href = \"./index.html\"\n          } else {\n            return Promise.reject(response.data.msg)\n          }\n        })\n    },\n    doLogin() {\n      if (!this.name.length) return this.info = '请输入合适的用户名'\n      if (this.pwd.length < 5) return this.info = '密码长度太短'\n      this.login({ name: this.name, pwd: this.pwd })\n        .catch(msg => this.info = msg)\n    },\n    clearInfo() {\n      this.info = ''\n    }\n  },\n  watch: {\n    name: 'clearInfo',\n    pwd: 'clearInfo'\n  }\n}).$mount('#login')\n\n\n\n// WEBPACK FOOTER //\n// ./src/login.js","\nfunction get(name){\n    let cookieName = encodeURIComponent(name) + '=',\n        cookieStart = document.cookie.indexOf(cookieName),\n        cookieValue = null,\n        cookieEnd=null\n\n    if (cookieStart > -1) {\n        cookieEnd = document.cookie.indexOf(';', cookieStart)\n        if (cookieEnd == -1)cookieEnd = document.cookie.length\n    }\n    cookieValue = decodeURIComponent(document.cookie.substr(cookieStart\n        + cookieName.length, cookieEnd))\n    return cookieValue\n}\nfunction set(name, value, expires, path, domain, secure){\n    let cookieText = encodeURIComponent(name) + \"=\" + encodeURIComponent(value)\n    if (expires instanceof Date)\n        cookieText += \"; expires=\" + expires.toGMTString()\n    if (path) cookieText += \"; path=\" + path\n    if (domain) cookieText += \"; domain=\" + domain\n    if (secure) cookieText += \"; secure\"\n    document.cookie = cookieText\n}\n\nfunction unset(name, path, domain, secure) {\n    set(name, '', new Date(0), path, domain, secure);\n}\n\nexport {\n    get,set,unset\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/cookieUtil.js"],"sourceRoot":""}